# Chapter 11. Payment System

## Step 1 - Understand the Problem and Establish Design Scope

### Functional Requirement

### Non-functional Requirement

### Back-of-the-envolope Estimation

## Step 2 - Propose High-Level Design and Get Buy-In

2 steps to reflect how money flows:

1. Pay-in flow
2. Pay-out flow

### Pay-in flow

#### Payment Service

#### Payment Executor

#### Payment Service Provider (PSP)

#### Card Scheme

#### Ledger

#### Wallet

#### API for the Payment Service

#### The Data Model for the Payment Service

#### Double-entry Ledger System

#### Hosted Payment Page

### Pay-out flow

## Step 3 - Design Deep Dive

### PSP Integration

### Reconciliation

### Handling Payment Processing Delays

### Communication among Internal Services

### Handling payments that Failed

### Exact-Once Delivery

### Consistency

### Security

## Step 4 - Wrap Up
